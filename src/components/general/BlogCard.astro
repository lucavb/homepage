---
import type { IBlogPost } from '@types';
import BlogThumbnail from './BlogThumbnail.astro';

interface Props {
    blogPost: IBlogPost;
}

const { blogPost } = Astro.props;
const { id, title, description, publishDate, tags, thumbnail, heroImagePath } = blogPost;

const formatDate = (date: Date) => {
    return new Intl.DateTimeFormat('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
    }).format(date);
};
---

<article
    class="bg-white dark:bg-slate-800/80 rounded-2xl cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-slate-200/50 dark:hover:shadow-black/20 group border border-slate-200/60 dark:border-slate-700/50 flex flex-col hover:-translate-y-0.5"
>
    <a
        href={`/blog/${id}`}
        class="flex flex-col h-full p-5 hover:no-underline"
        data-track-title={title}
        onclick="_paq && _paq.push(['trackEvent', 'Blog', 'Post Click', this.dataset.trackTitle]);"
    >
        <div class="aspect-[16/10] bg-slate-100 dark:bg-slate-700 rounded-lg mb-4 overflow-hidden">
            <BlogThumbnail thumbnail={thumbnail} heroImagePath={heroImagePath} title={title} />
        </div>
        <div class="text-xs tracking-widest uppercase font-medium text-slate-500 dark:text-slate-400 mb-3">
            {formatDate(publishDate)}
        </div>
        <h3
            class="font-bold text-slate-900 dark:text-white mb-2 group-hover:text-violet-600 dark:group-hover:text-violet-400 transition-colors"
        >
            {title}
        </h3>
        <div class="flex-1 flex flex-col">
            <p class="text-slate-500 dark:text-slate-400 text-sm mb-4 line-clamp-2">
                {description}
            </p>
        </div>
        {
            tags && tags.length > 0 && (
                <div class="flex flex-wrap gap-x-2 items-center mt-auto text-xs font-medium text-slate-500 dark:text-slate-400">
                    {tags.map((tag, index) => (
                        <>
                            <span>{tag}</span>
                            {index < tags.length - 1 && <span class="text-slate-300 dark:text-slate-600">/</span>}
                        </>
                    ))}
                </div>
            )
        }
    </a>
</article>
