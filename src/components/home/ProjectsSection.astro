---
import { Image } from 'astro:assets';
import { info } from '@data';
import SectionTitle from '@components/general/SectionTitle.astro';

const featureProjects = info.projects.reduce((accumulator, project) => {
    if (accumulator.length < 6 && project.isFeatured) {
        accumulator.push(project);
    }
    return accumulator;
}, []);
---

<!-- Projects Section -->
<section id="projects" class="py-20 bg-white dark:bg-gray-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <SectionTitle
            title="Featured Projects"
            description="A selection of impactful projects that showcase my expertise in enterprise software development and digital transformation."
        />
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {
                featureProjects.map((project) => (
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow overflow-hidden border border-gray-100 dark:border-gray-700">
                        <div class="h-48 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center">
                            {project.thumbnail ? (
                                <Image
                                    src={project.thumbnail}
                                    alt={project.title}
                                    class="w-full h-full object-cover"
                                    width={400}
                                    height={192}
                                />
                            ) : (
                                <div class="text-blue-600 dark:text-blue-400">
                                    <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
                                        />
                                    </svg>
                                </div>
                            )}
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{project.title}</h3>
                            <div class="flex space-x-4">
                                {project.liveUrl && (
                                    <a
                                        href={project.liveUrl}
                                        target="_blank"
                                        class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-semibold"
                                        aria-label={`View ${project.title} live demo`}
                                        onclick={`_paq && _paq.push(['trackEvent', 'Project', 'Live Demo', '${project.title}']);`}
                                    >
                                        View Live →
                                    </a>
                                )}
                                {project.githubUrl && (
                                    <a
                                        href={project.githubUrl}
                                        target="_blank"
                                        class="text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 font-semibold"
                                        aria-label={`View ${project.title} source code on GitHub`}
                                        onclick={`_paq && _paq.push(['trackEvent', 'Project', 'GitHub', '${project.title}']);`}
                                    >
                                        GitHub →
                                    </a>
                                )}
                            </div>
                        </div>
                    </div>
                ))
            }
        </div>
        <div class="text-center mt-12">
            <a
                href="/projects"
                class="bg-gradient-to-br from-blue-600 to-indigo-700 text-white px-8 py-4 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-800 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1"
                onclick="_paq && _paq.push(['trackEvent', 'Navigation', 'View All Projects', 'Homepage']);"
            >
                View All Projects
            </a>
        </div>
    </div>
</section>
